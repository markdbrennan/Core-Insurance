$(document).ready(function(){function t(){$("#summaryMake").html("<b>Make: </b>"+$("#carMake").val()),$("#summaryModel").html("<b>Model: </b>"+$("#carModel").val()),$("#summaryYear").html("<b>Year: </b>"+$("#carYear").val()),$("#summaryFuel").html("<b>Fuel: </b>"+$("#carFuel").val()),$("#summaryName").html("<b>Name: </b>"+$("#titleSelect").val()+" "+$("#lastName").val()),$("#summaryMarital").html("<b>Marital Status: </b>"+$("#maritalStatus").val()),$("#summaryEmail").html("<b>Email: </b>"+$("#emailAddress").val()),$("#summaryPhone").html("<b>Phone: </b>"+$("#phoneNumber").val())}function e(e){var n,o=[];$(".inputError").each(function(){o.push(this)});for(var i=0;i<o.length;i++){if("none"!=$(o[i]).css("display"))return $(".modal").animate({scrollTop:$(o[i]).offset().top+500},1e3),$(o[i]).slideDown(),$(o[i]).parent().css("background","rgba(244,209,63, 0.55)"),!1;n=!0}n&&($(e).parent().prev().css("cursor","pointer"),$(".editButton").fadeIn(),$(e).parent().slideUp(),$(".menuButton").slideDown(),$(".summaryDetails").slideDown(),t())}function n(t){$(t).parent().children(".inputError").slideDown(),$(t).parent().children(".inputComplete").fadeOut()}function o(t){$(t).parent().children(".inputError").slideUp(),$(t).parent().children(".inputComplete").fadeIn()}function i(){""==$("#addressLine2").val()?$("#addressLine2").parent().children(".inputComplete").fadeOut():$("#addressLine2").parent().children(".inputComplete").fadeIn()}function a(t,e){var i=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;i.test(t)?o(e):n(e)}function s(t,e){var i=/^[A-Z]{1,2}[0-9]{1,2} ?[0-9][A-Z]{2}$/i;i.test(t)?o(e):n(e)}function l(t,e,n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var i="expires="+o.toGMTString();document.cookie=t+"="+e+";"+i+";path=/"}function c(t){for(var e=document.cookie.split(";"),n=0;n<e.length;n++){for(var o=e[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}var r=localStorage.getItem("savedTheme"),u=localStorage.getItem("savedLogo");null==r?(r="rgb(1, 173, 203)",$(".homeButton").css("background-color",r),$("#theme1").addClass("themeSelected")):($(".homeButton, .menuButton, input[type=submit]").css("background-color",r),$(".contact, .modalContent").css("color",r),$(".themePicker").each(function(t,e){$(this).css("background-color")==r&&$(this).addClass("themeSelected")})),null==u?$(".menuLogo").attr("src","images/CoreInsurance.png?modified=20161101"):$(".menuLogo").attr("src",u),$(".nav").slideDown(),$(".menuLogo").fadeIn(1e3),$(".contact").fadeIn(1e3),$(".modal").fadeIn(),$(".homeButton").click(function(t){$(".modalContent").fadeOut(),$(".modal").animate({height:"75%",width:"80%",top:"24%",borderRadius:"20"}).promise().done(function(){$(".summaryView").fadeIn()})}),$("#personalButton").click(function(t){$(".menuButton").not("#personalButton").slideUp(),$(".summaryDetails").slideUp(),$(".personalDetails").slideDown(),$(".editButton").hide(),$("#personalButton").css("cursor","initial")}),$("#carButton").click(function(t){$(".menuButton").not("#carButton").slideUp(),$(".summaryDetails").slideUp(),$(".carDetails").slideDown(),$(".editButton").hide(),$("#carButton").css("cursor","initial")}),$("#licenseButton").click(function(t){$(".menuButton").not("#licenseButton").slideUp(),$(".summaryDetails").slideUp(),$(".licenseDetails").slideDown(),$(".editButton").hide(),$("#licenseButton").css("cursor","initial")}),$("#coverButton").click(function(t){$(".menuButton").not("#coverButton").slideUp(),$(".summaryDetails").slideUp(),$(".coverDetails").slideDown(),$(".editButton").hide(),$("#coverButton").css("cursor","initial")}),$.getJSON({url:"userquote.json",cache:!1,dataType:"json",success:function(e){$.each(e.personal,function(t,e){$("#"+t).val(e),$("."+t).val(e)}),$.each(e.car,function(t,e){$("#"+t).val(e),$("."+t).val(e)}),$.each(e.license,function(t,e){$("#"+t).val(e),$("."+t).val(e)}),$.each(e.cover,function(t,e){$("#"+t).val(e),$("."+t).val(e)}),t()}}),$(".inputContent").mouseover(function(){$(this).css("background","rgba(255,255,255, 0.55)")}),$(".inputContent").mouseout(function(){$(this).css("background-color","transparent")}),$(".menuButton:not(#summaryButton)").mouseover(function(){$(this).css("background-color","#34495E")}),$(".menuButton:not(#summaryButton)").mouseout(function(){$(this).css("background-color",r)});var m=["Alpha Romeo","Aston Martin","Audi","BMW","Chevrolet","Citroen","Fiat","Ford","Honda","Hyundai","Kia","Mazda","Peugeot","Renault","Toyota","Volkswagen","Volvo","Vauxhall"];$("#carMake").autocomplete({source:m}),$(document).tooltip(),$(".dob").datepicker({maxDate:"-192M",changeMonth:!0,changeYear:!0}),$(".policyStart").datepicker({minDate:"1D",maxDate:"30D",changeMonth:!0,changeYear:!0}),$("#datepicker").datepicker("option","dateFormat","yy-mm-dd"),$("#policyStart").datepicker("option","dateFormat","yy-mm-dd"),$("#personalForm").submit(function(t){t.preventDefault(),e($(".personalUpdateBtn"));var n,o,i=new Date($(".dob").val()),a=new Date,s=a.getYear()-i.getYear();s>=17&&25>=s?(n=1700,o=n/10,$("#summaryAnnual").html("<b>Annual: </b> &pound;"+n),$("#summaryMonthly").html("<b>10 Monthly Payments: </b> &pound;"+o)):s>=26&&40>=s?(n=490,o=n/10,$("#summaryAnnual").html("<b>Annual: </b> &pound;"+n),$("#summaryMonthly").html("<b>10 Monthly Payments: </b> &pound;"+o)):(n=650,o=n/10,$("#summaryAnnual").html("<b>Annual: </b> &pound;"+n),$("#summaryMonthly").html("<b>10 Monthly Payments: </b> &pound;"+o))}),$("#carForm").submit(function(t){t.preventDefault(),e($(".carUpdateBtn"))}),$("#licenseForm").submit(function(t){t.preventDefault(),e($(".licenseUpdateBtn"))}),$("#coverForm").submit(function(t){t.preventDefault(),e($(".coverUpdateBtn"))});for(var d=1;12>=d;d++)1==d.toString().length&&(d="0"+d),$("#claimMonth").append($("<option></option>").attr("value",d).text(d)),$("#convictionMonth").append($("<option></option>").attr("value",d).text(d));for(var d=2011;2016>=d;d++)$("#claimYear").append($("<option></option>").attr("value",d).text(d)),$("#convictionYear").append($("<option></option>").attr("value",d).text(d));$("#addClaim").click(function(t){$(".claimFieldset").append('<div class="claimContent"><input type="button" class="removeClaim" value="Remove Claim" />'+$(".claim").html()+"</div>")}),$(".claimFieldset").on("click",".removeClaim",function(t){$(this).parent().remove()}),$("#addConviction").click(function(t){$(".convictionFieldset").append('<div class="convictionContent"><input type="button" class="removeConviction" value="Remove Conviction" />'+$(".conviction").html()+"</div>")}),$(".convictionFieldset").on("click",".removeConviction",function(t){$(this).parent().remove()}),$(":input").focus(function(){$(this).parent().children(".inputError").slideUp()}),i(),$("#addressLine2").blur(function(){i()}),$("#addressLine1, #carRegistration, #carModel, #convictionType").blur(function(){0===$(this).val().trim().length?n(this):o(this)}),$("#firstName, #lastName, #town, #county, #carMake").blur(function(){var t=$(this).val().match(/^[a-zA-Z\s]*$/);null==t||0===$(this).val().trim().length?n(this):o(this)}),$("#carYear").blur(function(){var t=$(this).val();4!=t.trim().length||t>2016||1960>t?n(this):o(this)}),$(".dob").blur(function(){0===$(this).val().trim().length?n(this):o(this);var t=new Date($(".dob").val()),e=new Date,i=new Date(e);i.setDate(i.getDate()-5840);var a=new Date(i);t>=a?n(this):o(this),$("#datepicker").datepicker({onSelect:function(){o(this)}})}),$("#emailAddress").blur(function(){a($("#emailAddress").val(),this)}),$("#phoneNumber").blur(function(){$("#phoneNumber").val().trim().length>=10?o(this):n(this)}),$("#postcode").blur(function(){s($("#postcode").val(),this)}),$("#employOther").blur(function(){"Other"==$("#employmentSelect :selected").text()&&(0===$(this).val().trim().length?n(this):o(this))}),$(".policyStart").blur(function(){0===$(this).val().trim().length?n(this):o(this);var t=new Date($(".policyStart").val()),e=new Date,i=new Date(e);i.setDate(i.getDate()+30);var a=new Date(i);console.log(a),t>=a||e>t?n(this):o(this),$("#policyStart").datepicker({onSelect:function(){o(this)}})}),$("#employmentSelect").change(function(){var t=$("#employmentSelect :selected").text();"Other"==t?($("#employmentOther").slideDown(),$("#employmentError").slideDown()):($("#employmentOther").slideUp(),$("#employmentError").slideUp())});var p=$("#registrationSelect :selected").text();"Yes"==p?($("#registration").slideDown(),$("#carRegistration").blur(function(){0===$(this).val().trim().length?n(this):o(this)})):$("#registration").slideUp(),$("#registrationSelect").change(function(){var t=$("#registrationSelect :selected").text();"Yes"==t?$("#registration").slideDown():($("#registration").slideUp(),$("#carRegistration").parent().children(".inputError").slideUp())}),$("#accidentClaimSelect").change(function(){var t=$("#accidentClaimSelect :selected").text();"Yes"==t?$("#accidentInput").slideDown():$("#accidentInput").slideUp()}),$("#convictionSelect").change(function(){var t=$("#convictionSelect :selected").text();"Yes"==t?$("#convictionInput").slideDown():$("#convictionInput").slideUp()}),""==c("name")&&$("#terms").slideDown(),$("#cookieButton").click(function(){l("name",c("name"),30),$("#terms").slideUp()}),$("#settingsDialog").dialog({autoOpen:!1,show:{effect:"clip",duration:300},hide:{effect:"clip",duration:300}}),$("#settingsButton").mouseover(function(){$("#settingsButton").css("background-color",r)}),$("#settingsButton").mouseout(function(){$("#settingsButton").css("background-color","rgba(255,255,255, 0.9)")}),$("#settingsButton").click(function(){$("#settingsDialog").dialog("open")}),$("#transparency").change(function(){$("#transparency").is(":checked")?$("#modal").removeClass("modalSolid"):$("#modal").addClass("modalSolid")}),$("#largeFont").change(function(){$("#largeFont").is(":checked")?($("#modal").css("font-size","25px"),$(".editButton").css("font-size","25px"),$(".modalContent").css("font-size","26px"),$(".summaryDetails").css("font-size","23px"),$(".inputTitle").css("font-size","28px"),$(".inputSubTitle").css("font-size","19px"),$("input[type=submit]").css("font-size","22px"),$(".textInputStyle").css("font-size","24px"),$(".select").css("font-size","24px")):($("#modal").css("font-size","18px"),$(".editButton").css("font-size","18px"),$(".modalContent").css("font-size","22px"),$(".summaryDetails").css("font-size","18px"),$(".inputTitle").css("font-size","22px"),$(".inputSubTitle").css("font-size","15px"),$("input[type=submit]").css("font-size","16px"),$(".textInputStyle").css("font-size","18px"),$(".select").css("font-size","18px"))}),$(".themePicker").click(function(){var t,e,n=$(this).attr("id");"theme1"==n?(t="rgb(1, 173, 203)",e="images/CoreInsurance.png?modified=20161101",localStorage.setItem("savedTheme",t),localStorage.setItem("savedLogo",e)):"theme2"==n?(t="rgb(3, 174, 32)",e="images/CoreInsurance2.png?modified=20161101",localStorage.setItem("savedTheme",t),localStorage.setItem("savedLogo",e)):"theme3"==n?(t="rgb(230, 126, 34)",e="images/CoreInsurance3.png?modified=20161101",localStorage.setItem("savedTheme",t),localStorage.setItem("savedLogo",e)):(t="rgb(125, 60, 152)",e="images/CoreInsurance4.png?modified=20161101",localStorage.setItem("savedTheme",t),localStorage.setItem("savedLogo",e)),r=localStorage.getItem("savedTheme"),$(".themePicker").removeClass("themeSelected"),$(this).addClass("themeSelected"),$(".homeButton, .menuButton, input[type=submit]").css("background-color",t),$(".contact, .modalContent").css("color",t),$(".menuLogo").attr("src",e)})});